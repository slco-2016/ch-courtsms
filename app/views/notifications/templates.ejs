<% include ../partials/cardFrameTop %>

<div class="cardHead">
  <a href="/notifications"><% include ../partials/cardExit %></a>
  <div class="cardTitle">Notification Message</div>
  <div class="cardSubtitle">
  </div>
</div>

<div class="cardBody">
  
  <% if (templates.length) { %>
    <div class="scrollListBox">
      <% for (var i=0; i < templates.length; i++) { %>
        <div 
          class="scrollListRow" 
          templateID="<%= templates[i].template_id %>"
          data-title="<%= templates[i].title %>"
          data-content="<%= templates[i].content %>"
          >
          
          <div class="useCount">
            <%= templates[i].times_used %>
          </div>

          <div class="scrollListContent">
            <div class="titleText">
              <% if (templates[i].title) { %>
                <%= templates[i].title %>
              <% } else { %>
                No title available.
              <% } %>
            </div>
            <div class="bodyText">
              <%= templates[i].content %>
            </div>
            <div class="tags">
              
            </div>
          </div>
        </div>
      <% } %>
    </div>

    <form method="post" action="/notifications/create/compose">
      <input type="hidden" name="clientID" value="<%= parameters.clientID %>" > 
      <input type="hidden" name="commID" value="<%= parameters.commID %>" > 
      <input type="hidden" name="sendDate" value="<%= parameters.sendDate %>" > 
      <input type="hidden" name="sendHour" value="<%= parameters.sendHour %>" >     
      
      <input type="hidden" name="title"      id="templateTitle">    
      <input type="hidden" name="content"    id="templateContent">
      <input type="hidden" name="templateid" id="templateId">

      <div class="formRow">
        <input type="submit" class="formSubmit padTop" value="Select template">
      </div>

    </form>
  <% } else { %>
    <div class="formRow">
      <div class="formInput">
        <center>
          No templates available.
        </center>
      </div>
    </div>

    <a href="/templates/create">
      <div class="formRow">
        <input type="submit" class="formSubmit padTop" value="Create new">
      </div>
    </a>
  <% } %>

</div>

<script type="text/javascript" class="JSnotificationsTemplates"></script>

<% include ../partials/cardFrameBottom %>